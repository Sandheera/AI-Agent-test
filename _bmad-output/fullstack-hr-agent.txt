# BMAD Fullstack HR Agent - Complete System Documentation

## Executive Summary
The BMAD Fullstack HR Agent is a comprehensive, enterprise-grade HR automation system built within the BMAD Framework. It automates the entire HR lifecycle including recruitment, employee data management, onboarding, leave management, and payroll integration, while maintaining strict compliance with labor laws and data privacy regulations.

---

## Agent Architecture

### Agent Profile
- **Name:** Alex
- **Title:** Senior Fullstack HR Systems Specialist
- **Icon:** ðŸ‘¤
- **Framework:** BMAD (Behavior-Driven Agent Design)
- **Status:** Active

### Agent Capabilities
1. Resume screening and candidate ranking (AI-powered)
2. Employee onboarding workflow automation
3. Leave management and balance tracking
4. Payroll calculation and processing
5. Compliance verification (GDPR, CCPA, labor laws)
6. Employee data management with privacy controls
7. API integration and testing via Postman
8. Real-time reporting and analytics

---

## Technical Stack

### Backend Technologies
```
Primary Languages:
  - Node.js (JavaScript/TypeScript) - REST API, microservices
  - Python 3.8+ - Data processing, ML algorithms, compliance rules
  
Frameworks:
  - Express.js - REST API framework
  - FastAPI - Async Python APIs
  - Django - HR business logic
  
Databases:
  - PostgreSQL - Employee records, payroll data
  - MongoDB - Document storage (resumes, compliance logs)
  - Redis - Session management, caching
```

### API Layer
```
REST API Endpoints:
  Base URL: https://api.hr-system.internal/v1
  Authentication: JWT Bearer tokens
  Rate Limiting: 1000 req/hour (standard), 100 req/hour (batch)
  Response Format: JSON with standardized error handling

Core API Routes:
  - /recruitment/* - Hiring and candidate management
  - /employees/* - Employee records and data
  - /leave/* - Leave requests and balances
  - /payroll/* - Compensation processing
  - /compliance/* - Compliance verification
  - /onboarding/* - New hire setup
```

### Testing & Workflow Automation
```
Postman Collections:
  - recruitment-workflow.postman_collection.json
  - payroll-processing.postman_collection.json
  - employee-data-mgmt.postman_collection.json
  - leave-management.postman_collection.json
  - compliance-verification.postman_collection.json

Features:
  - Pre-request scripts for data setup
  - Post-response scripts for validation
  - Environment variables for configuration
  - Automated workflow testing
  - Integration testing
```

### Security Infrastructure
```
Authentication:
  - JWT-based authentication
  - OAuth 2.0 integration support
  - Multi-factor authentication capability
  
Encryption:
  - TLS 1.3 for all data in transit
  - AES-256 for data at rest
  - PII field-level encryption
  
Access Control:
  - Role-based access control (RBAC)
  - Principle of least privilege
  - Audit logging of all access
  - Department-based data visibility
```

---

## Knowledge Base Structure

### 1. HR Logic Code (`/hr-logic`)
Implementation of core HR business logic:

#### resume-screening.js
- Resume document parsing (PDF, DOCX, TXT)
- Candidate information extraction (name, email, skills, experience)
- Skill matching and proficiency assessment
- Candidate scoring against job requirements
- Hiring recommendation generation

Key Functions:
```javascript
parseResume(resumeBuffer, format)     // Extract data from resume
extractSkills(resumeText)              // Identify technical and soft skills
scoreCandidate(candidate, jobReq)      // Calculate match score
generateRecommendation(score)          // Hiring recommendation
```

#### candidate-ranking.py
- Multi-factor candidate evaluation
- Skill fit analysis
- Experience relevance assessment
- Cultural alignment evaluation
- Growth potential prediction
- Tier-based candidate ranking

Key Functions:
```python
rank_candidates(candidates, job_profile)  # Rank all candidates
evaluate_skills_fit()                      # Skills match scoring
evaluate_experience_relevance()            # Experience evaluation
assign_tiers()                             # Tier assignment logic
generate_interview_questions()             # Interview prep
```

#### onboarding-workflow.js
- New hire data collection
- System access provisioning
- Benefits enrollment automation
- Compliance document management
- Training assignment and tracking
- 30/60/90 day check-in scheduling

#### access-provisioning.py
- Email account creation
- System credentials setup
- VPN and network access
- Application access provisioning
- Permissions and group management
- Access audit trail

#### leave-management.js
- Leave balance calculation
- Accrual processing
- Leave request submission
- Approval workflow automation
- Calendar and conflict detection
- Carryover policy enforcement

#### compliance-rules.py
- Labor law validation
- Jurisdiction-specific rule checks
- Tax calculation rules
- Leave entitlement verification
- Wage and hour compliance
- Record retention policies

#### payroll-engine.js
- Payroll period processing
- Leave deduction calculations
- Shift and overtime processing
- Bonus and incentive calculation
- Net pay computation

#### tax-calculator.py
- Federal income tax withholding (Form W-4)
- Social Security and Medicare (FICA) calculations
- State income tax withholding
- Estimated tax calculations
- Tax filing and reporting

#### employee-data-store.js
- Employee master record management
- Personal information storage
- Employment status tracking
- Document management integration
- Change history and audit trail

#### access-control.py
- Role-based permission definitions
- PII visibility controls
- Department-based data access
- Hierarchical permission inheritance
- Fine-grained field-level access

#### data-privacy-engine.py
- GDPR compliance enforcement
- CCPA data subject rights processing
- Data retention policy enforcement
- Data anonymization and pseudonymization
- Right to be forgotten implementation
- Data breach notification

### 2. API Documentation (`/hr-api-docs`)

#### api-reference.md
Complete REST API documentation including:
- Endpoint descriptions and parameters
- Request/response examples
- Authentication requirements
- Error handling and codes
- Rate limiting information
- Webhook event definitions

Endpoints Documented:
```
Job Management:
  - POST /recruitment/jobs
  - GET /recruitment/jobs/{job_id}
  
Resume Processing:
  - POST /recruitment/resumes/upload
  - POST /recruitment/candidates/score
  
Employee Data:
  - POST /employees/create
  - GET /employees/{employee_id}
  - PUT /employees/{employee_id}
  
Leave Management:
  - GET /leave/balance/{employee_id}
  - POST /leave/request
  - PUT /leave/request/{request_id}/approve
  
Payroll:
  - POST /payroll/calculate
  - POST /payroll/process
  - GET /payroll/stub/{employee_id}/{period}
  
Compliance:
  - POST /compliance/audit
  - GET /compliance/audit/{audit_id}/results
```

### 3. Compliance Rules (`/hr-compliance`)

#### labor-law-rules.md
Jurisdiction-specific labor law requirements:
- Federal minimum wage and overtime rules
- State-specific leave entitlements
- Child labor restrictions
- Family and Medical Leave Act (FMLA)
- Americans with Disabilities Act (ADA)
- Equal Employment Opportunity (EEO)
- Wage and hour regulations
- Record retention requirements
- Penalties and enforcement

#### gdpr-requirements.md
GDPR data protection requirements:
- Employee rights (access, rectification, erasure, portability, objection)
- Lawful basis for processing
- Data retention periods
- Data Protection Officer requirements
- Data Protection Impact Assessment (DPIA)
- Data breach notification procedures
- International data transfers

#### ccpa-requirements.md
California Consumer Privacy Act compliance:
- Consumer rights (access, deletion, opt-out)
- Right to non-discrimination
- Sale of personal information disclosure
- Service provider contracts
- Privacy policy requirements
- Data breach notification
- Opt-out mechanisms

### 4. Postman Collections (`/postman-collections`)

#### recruitment-workflow.postman_collection.json
API testing for hiring processes:
- Job creation and management
- Resume upload and parsing
- Candidate scoring
- Candidate ranking and filtering
- Interview scheduling
- Interview feedback recording

Request Examples:
```
Create Job: POST /recruitment/jobs
Upload Resume: POST /recruitment/resumes/upload
Score Candidate: POST /recruitment/candidates/score
Get Ranked List: GET /recruitment/candidates/ranked
Schedule Interview: POST /recruitment/interviews/schedule
```

#### payroll-processing.postman_collection.json
Payroll calculation and disbursement:
- Payroll period creation
- Calculation and validation
- Processing and disbursement
- Pay stub generation
- Tax form generation (W-2, 1099)
- Year-end reporting

#### employee-data-mgmt.postman_collection.json
Employee record management:
- Create employee records
- Update employee information
- Archive employee records
- Search and filter employees
- Bulk import/export
- Document management

#### leave-management.postman_collection.json
Leave request and tracking:
- Check leave balances
- Submit leave requests
- Approve/reject requests
- View leave calendar
- Modify leave policies
- Generate leave reports

#### compliance-verification.postman_collection.json
Compliance checking and audits:
- Run compliance audits
- Get audit results
- Review findings and recommendations
- Track remediation status
- Generate compliance reports

### 5. Integration Specifications (`/hr-integrations`)

#### Payroll System Integration
- Third-party payroll provider APIs
- Bank integration for direct deposit
- Tax filing integrations (IRS, state revenue departments)
- Employee compensation data export

#### Benefits Provider Integration
- Health insurance enrollment APIs
- Benefits calculation integration
- Plan administration
- COBRA compliance

#### Time Tracking Integration
- Timesheet data import
- Attendance synchronization
- Overtime calculation
- Shift management

#### Learning Management Integration
- Course assignment APIs
- Training completion tracking
- Certification management
- Competency assessment

#### Slack Notifications Integration
- Hire confirmations
- Leave approvals
- Onboarding milestones
- Compliance reminders
- Payroll completion notifications

### 6. Data Models (`/hr-data-models`)

#### Employee Schema
```json
{
  "employee_id": "string",
  "personal": {
    "first_name": "string",
    "last_name": "string",
    "email": "string",
    "phone": "string",
    "date_of_birth": "date",
    "ssn": "string (encrypted)"
  },
  "employment": {
    "job_title": "string",
    "department": "string",
    "manager_id": "string",
    "start_date": "date",
    "employment_type": "enum(Full-Time, Part-Time, Contract)",
    "salary": "number",
    "benefits": "object"
  },
  "status": "enum(active, on_leave, terminated, archived)",
  "created_at": "timestamp",
  "updated_at": "timestamp"
}
```

#### Job Schema
```json
{
  "job_id": "string",
  "title": "string",
  "description": "string",
  "required_skills": ["string"],
  "nice_to_have_skills": ["string"],
  "years_experience_required": "number",
  "salary_range": {
    "min": "number",
    "max": "number"
  },
  "department": "string",
  "location": "string",
  "remote_work_allowed": "boolean",
  "status": "enum(open, closed, filled)",
  "created_at": "timestamp"
}
```

#### Candidate Schema
```json
{
  "candidate_id": "string",
  "name": "string",
  "email": "string",
  "phone": "string",
  "resume_id": "string",
  "skills": ["string"],
  "experience": "number",
  "education": "string",
  "scoring": {
    "total_score": "number",
    "skills_match": "number",
    "experience_match": "number",
    "tier": "string"
  },
  "applied_for": ["job_id"],
  "status": "enum(new, screening, interview, offer, rejected, hired)",
  "created_at": "timestamp"
}
```

#### Leave Schema
```json
{
  "leave_request_id": "string",
  "employee_id": "string",
  "leave_type": "enum(vacation, sick, personal, unpaid, emergency)",
  "start_date": "date",
  "end_date": "date",
  "duration_days": "number",
  "reason": "string",
  "status": "enum(pending, approved, rejected, cancelled)",
  "approved_by": "string",
  "created_at": "timestamp",
  "updated_at": "timestamp"
}
```

#### Payroll Schema
```json
{
  "payroll_id": "string",
  "period": "string (YYYY-MM)",
  "employees": ["employee_id"],
  "calculations": {
    "gross_pay": "number",
    "federal_tax": "number",
    "fica_tax": "number",
    "state_tax": "number",
    "deductions": "number",
    "net_pay": "number"
  },
  "status": "enum(draft, calculated, approved, processed)",
  "pay_date": "date",
  "processed_date": "timestamp"
}
```

---

## Workflow Processes

### 1. Resume Screening & Candidate Ranking Workflow
```
1. Job Description Input
   â”œâ”€ Accept job requirements
   â”œâ”€ Extract key skills and competencies
   â””â”€ Set evaluation criteria

2. Resume Processing
   â”œâ”€ Parse resume documents
   â”œâ”€ Extract candidate information
   â””â”€ Normalize data

3. AI-Powered Screening
   â”œâ”€ Match skills against requirements
   â”œâ”€ Evaluate experience
   â”œâ”€ Assess education level
   â””â”€ Calculate compatibility score

4. Ranking & Tiering
   â”œâ”€ Sort candidates by score
   â”œâ”€ Assign to tiers (1-4)
   â”œâ”€ Identify top candidates
   â””â”€ Flag skill gaps

5. Output & Actions
   â”œâ”€ Generate screening report
   â”œâ”€ Create ranking matrix
   â”œâ”€ Schedule top interviews
   â””â”€ Notify hiring managers
```

### 2. Employee Onboarding Workflow
```
1. Pre-Arrival Setup (Week -1)
   â”œâ”€ Create employee record
   â”œâ”€ Collect personal information
   â”œâ”€ Set up email and accounts
   â””â”€ Prepare workspace

2. First Day (Day 1)
   â”œâ”€ Complete I-9 verification
   â”œâ”€ Provide IT setup
   â”œâ”€ Review company policies
   â”œâ”€ Meet manager and team
   â””â”€ IT security training

3. First Month (Days 2-30)
   â”œâ”€ System access training
   â”œâ”€ Department orientation
   â”œâ”€ Product/service training
   â”œâ”€ Compliance training
   â””â”€ Performance expectations

4. 30-Day Check-in
   â”œâ”€ Manager feedback
   â”œâ”€ Skills assessment
   â”œâ”€ Cultural fit evaluation
   â””â”€ Adjustment support

5. 60-Day Check-in
   â”œâ”€ Progress review
   â”œâ”€ Training completion check
   â”œâ”€ Continued development
   â””â”€ Feedback loop

6. 90-Day Check-in
   â”œâ”€ Formal performance review
   â”œâ”€ Probation period completion
   â”œâ”€ Role confirmation
   â””â”€ Development plan setup
```

### 3. Leave Management Workflow
```
1. Leave Balance Management
   â”œâ”€ Calculate annual allocation
   â”œâ”€ Track accrual
   â”œâ”€ Manage carryover
   â””â”€ Apply policy rules

2. Leave Request
   â”œâ”€ Submit request form
   â”œâ”€ Select leave type
   â”œâ”€ Provide reason (if required)
   â”œâ”€ Check conflicts
   â””â”€ Send for approval

3. Approval Process
   â”œâ”€ Manager review
   â”œâ”€ HR compliance check
   â”œâ”€ Backup coverage verification
   â”œâ”€ Approve or reject
   â””â”€ Notify employee

4. Leave Tracking
   â”œâ”€ Update calendar
   â”œâ”€ Deduct from balance
   â”œâ”€ Notify payroll
   â””â”€ Create records

5. Payroll Integration
   â”œâ”€ Deduct from pay
   â”œâ”€ Calculate carryover
   â”œâ”€ Manage year-end settlements
   â””â”€ Generate reports
```

### 4. Payroll Processing Workflow
```
1. Data Collection
   â”œâ”€ Gather timekeeping data
   â”œâ”€ Review leave records
   â”œâ”€ Collect bonus/commission data
   â””â”€ Note any adjustments

2. Calculation Phase
   â”œâ”€ Calculate gross pay
   â”œâ”€ Apply leave deductions
   â”œâ”€ Calculate overtime
   â”œâ”€ Compute shifts/differentials
   â””â”€ Add bonuses/commissions

3. Tax & Deduction Processing
   â”œâ”€ Calculate federal income tax
   â”œâ”€ Calculate FICA (SS + Medicare)
   â”œâ”€ Calculate state income tax
   â”œâ”€ Process benefit deductions
   â”œâ”€ Apply garnishments
   â””â”€ Compute net pay

4. Validation & Audit
   â”œâ”€ Verify calculations
   â”œâ”€ Check compliance
   â”œâ”€ Review exceptions
   â”œâ”€ Audit by HR/Finance
   â””â”€ Approve for processing

5. Disbursement
   â”œâ”€ Process direct deposits
   â”œâ”€ Generate pay stubs
   â”œâ”€ Create tax records
   â”œâ”€ Archive documents
   â””â”€ Notify employees

6. Reporting
   â”œâ”€ Generate payroll reports
   â”œâ”€ Prepare tax filings (941, W-2, 1099)
   â”œâ”€ Create audit trail
   â””â”€ Year-end tax forms
```

### 5. Compliance Verification Workflow
```
1. Compliance Audit
   â”œâ”€ Review data storage
   â”œâ”€ Verify encryption
   â”œâ”€ Audit access logs
   â”œâ”€ Check retention policies
   â””â”€ Assess controls

2. Labor Law Compliance
   â”œâ”€ Verify minimum wage
   â”œâ”€ Check overtime rules
   â”œâ”€ Validate leave entitlements
   â”œâ”€ Review work hour limits
   â””â”€ Confirm union compliance

3. Data Privacy Assessment
   â”œâ”€ Verify PII protection
   â”œâ”€ Check consent management
   â”œâ”€ Assess vendor compliance
   â”œâ”€ Review data transfers
   â””â”€ Validate retention

4. Risk Assessment
   â”œâ”€ Identify gaps
   â”œâ”€ Score severity
   â”œâ”€ Prioritize issues
   â”œâ”€ Estimate remediation
   â””â”€ Plan mitigation

5. Remediation
   â”œâ”€ Implement fixes
   â”œâ”€ Document changes
   â”œâ”€ Verify effectiveness
   â”œâ”€ Update policies
   â””â”€ Schedule re-audit
```

---

## API Usage Examples

### Resume Screening Example
```bash
# 1. Upload Resume
curl -X POST https://api.hr-system.internal/v1/recruitment/resumes/upload \
  -H "Authorization: Bearer $JWT_TOKEN" \
  -F "file=@resume.pdf" \
  -F "job_id=JOB-2025-001"

# 2. Score Candidate
curl -X POST https://api.hr-system.internal/v1/recruitment/candidates/score \
  -H "Authorization: Bearer $JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "resume_id": "RES-2025-001",
    "job_id": "JOB-2025-001"
  }'

# 3. Get Ranked Candidates
curl -X GET https://api.hr-system.internal/v1/recruitment/candidates/ranked?job_id=JOB-2025-001&limit=10 \
  -H "Authorization: Bearer $JWT_TOKEN"
```

### Payroll Processing Example
```bash
# 1. Calculate Payroll
curl -X POST https://api.hr-system.internal/v1/payroll/calculate \
  -H "Authorization: Bearer $JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "payroll_period": "2025-01",
    "employees": ["EMP-2025-001", "EMP-2025-002"],
    "include_bonus": true
  }'

# 2. Process Payroll
curl -X POST https://api.hr-system.internal/v1/payroll/process \
  -H "Authorization: Bearer $JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "payroll_id": "PR-2025-01-001",
    "approved_by": "EMP-1001"
  }'

# 3. Get Pay Stub
curl -X GET https://api.hr-system.internal/v1/payroll/stub/EMP-2025-001/2025-01 \
  -H "Authorization: Bearer $JWT_TOKEN"
```

---

## Compliance Features

### Data Privacy & Security
- AES-256 encryption for sensitive data
- Field-level access controls for PII
- GDPR data subject rights implementation
- CCPA opt-out mechanisms
- Automated data retention enforcement
- Breach notification procedures
- Audit logging of all access

### Labor Law Compliance
- Federal minimum wage validation
- Overtime calculation enforcement (FLSA)
- Jurisdiction-specific leave entitlements
- FMLA compliance tracking
- ADA accommodation documentation
- Equal pay monitoring
- Child labor restrictions (where applicable)

### Payroll Compliance
- Accurate tax withholding (federal, state, local)
- FICA calculation (Social Security + Medicare)
- Garnishment processing
- Form 941-X quarterly reconciliation
- W-2 and 1099 generation
- Year-end tax filing
- Record retention (7 years minimum)

---

## Deployment & Configuration

### Environment Setup
```bash
# Install dependencies
npm install              # Node.js dependencies
pip install -r requirements.txt  # Python dependencies

# Configuration
export HR_API_URL=https://api.hr-system.internal/v1
export DB_HOST=postgres.internal
export DB_NAME=hr_system
export JWT_SECRET=<secure_secret>
export ENCRYPTION_KEY=<secure_key>

# Start services
npm start               # Start Node.js services
python -m uvicorn app:app --host 0.0.0.0 --port 8000  # Python APIs
```

### Database Setup
```sql
-- Create required tables
CREATE TABLE employees (...)
CREATE TABLE jobs (...)
CREATE TABLE candidates (...)
CREATE TABLE leave_requests (...)
CREATE TABLE payroll (...)
CREATE TABLE audit_logs (...)

-- Create indexes for performance
CREATE INDEX idx_employee_email ON employees(email)
CREATE INDEX idx_candidate_job ON candidates(job_id)
```

---

## Support & Maintenance

### Troubleshooting Guide
- Resume parsing issues
- API authentication errors
- Payroll calculation discrepancies
- Compliance audit failures
- Data access permission errors

### Regular Maintenance Tasks
- Update labor law rules quarterly
- Review and update tax withholding tables annually
- Audit data access logs monthly
- Test disaster recovery procedures semi-annually
- Review and update security certificates
- Archive old records per retention policies

### Support Contacts
- HR Systems Team: hr-systems@company.com
- Compliance Officer: compliance@company.com
- Data Privacy: privacy@company.com
- Technical Support: support@company.com

---

## Conclusion
The BMAD Fullstack HR Agent provides a comprehensive, scalable, and compliant HR management system that automates critical business processes while maintaining strict data privacy and regulatory compliance standards.
